{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect, useRef } from 'react';\nexport const useImageOptimization = (src, options = {}) => {\n  _s();\n  const [imageSrc, setImageSrc] = useState(null);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [isInView, setIsInView] = useState(false);\n  const imgRef = useRef(null);\n  const {\n    lazy = true,\n    webp = true,\n    responsive = true,\n    quality = 80,\n    placeholder = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzUwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjJmMmYyIi8+PC9zdmc+'\n  } = options;\n\n  // Función para generar WebP si es posible\n  const getWebPSrc = originalSrc => {\n    if (!webp || !originalSrc) return originalSrc;\n\n    // Si es una imagen local, intentar WebP\n    if (originalSrc.startsWith('/assets/')) {\n      const webpPath = originalSrc.replace(/\\.(png|jpg|jpeg)$/i, '.webp');\n      return webpPath;\n    }\n\n    // Si es una URL externa, mantener original\n    return originalSrc;\n  };\n\n  // Función para generar srcSet responsive\n  const getResponsiveSrcSet = originalSrc => {\n    if (!responsive || !originalSrc) return null;\n\n    // Solo para imágenes locales\n    if (!originalSrc.startsWith('/assets/')) return null;\n    const baseName = originalSrc.replace(/\\.(png|jpg|jpeg|webp)$/i, '');\n    const extension = originalSrc.split('.').pop();\n    return [`${baseName}-300.${extension} 300w`, `${baseName}-600.${extension} 600w`, `${baseName}-900.${extension} 900w`].join(', ');\n  };\n\n  // Intersection Observer para lazy loading\n  useEffect(() => {\n    if (!lazy || !imgRef.current) return;\n    const observer = new IntersectionObserver(entries => {\n      entries.forEach(entry => {\n        if (entry.isIntersecting) {\n          setIsInView(true);\n          observer.unobserve(entry.target);\n        }\n      });\n    }, {\n      rootMargin: '50px',\n      // Cargar 50px antes de que sea visible\n      threshold: 0.1\n    });\n    observer.observe(imgRef.current);\n    return () => {\n      if (imgRef.current) {\n        observer.unobserve(imgRef.current);\n      }\n    };\n  }, [lazy]);\n\n  // Cargar imagen cuando esté en vista\n  useEffect(() => {\n    if (!isInView || !src) return;\n    const img = new Image();\n    img.onload = () => {\n      setImageSrc(src);\n      setIsLoaded(true);\n    };\n    img.onerror = () => {\n      // Fallback a imagen original si WebP falla\n      if (webp && src.includes('.webp')) {\n        const fallbackSrc = src.replace('.webp', '.png');\n        img.src = fallbackSrc;\n      } else {\n        setImageSrc(src);\n        setIsLoaded(true);\n      }\n    };\n\n    // Intentar WebP primero\n    const webpSrc = getWebPSrc(src);\n    img.src = webpSrc;\n  }, [isInView, src, webp]);\n\n  // Generar atributos de la imagen\n  const imageProps = {\n    ref: imgRef,\n    src: isLoaded ? imageSrc : placeholder,\n    loading: lazy ? 'lazy' : 'eager',\n    decoding: 'async',\n    ...(getResponsiveSrcSet(src) && {\n      srcSet: getResponsiveSrcSet(src),\n      sizes: '(max-width: 768px) 300px, (max-width: 1024px) 600px, 900px'\n    })\n  };\n  return {\n    imageProps,\n    isLoaded,\n    isInView,\n    placeholder\n  };\n};\n_s(useImageOptimization, \"IEGNL5Gv+IYmVIFOeLLCWATx1vc=\");","map":{"version":3,"names":["useState","useEffect","useRef","useImageOptimization","src","options","_s","imageSrc","setImageSrc","isLoaded","setIsLoaded","isInView","setIsInView","imgRef","lazy","webp","responsive","quality","placeholder","getWebPSrc","originalSrc","startsWith","webpPath","replace","getResponsiveSrcSet","baseName","extension","split","pop","join","current","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","unobserve","target","rootMargin","threshold","observe","img","Image","onload","onerror","includes","fallbackSrc","webpSrc","imageProps","ref","loading","decoding","srcSet","sizes"],"sources":["/Users/jungle/Documents/Developer Tests/Artivism-Web-React/src/hooks/useImageOptimization.js"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\n\nexport const useImageOptimization = (src, options = {}) => {\n  const [imageSrc, setImageSrc] = useState(null);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [isInView, setIsInView] = useState(false);\n  const imgRef = useRef(null);\n\n  const {\n    lazy = true,\n    webp = true,\n    responsive = true,\n    quality = 80,\n    placeholder = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzUwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjJmMmYyIi8+PC9zdmc+'\n  } = options;\n\n  // Función para generar WebP si es posible\n  const getWebPSrc = (originalSrc) => {\n    if (!webp || !originalSrc) return originalSrc;\n    \n    // Si es una imagen local, intentar WebP\n    if (originalSrc.startsWith('/assets/')) {\n      const webpPath = originalSrc.replace(/\\.(png|jpg|jpeg)$/i, '.webp');\n      return webpPath;\n    }\n    \n    // Si es una URL externa, mantener original\n    return originalSrc;\n  };\n\n  // Función para generar srcSet responsive\n  const getResponsiveSrcSet = (originalSrc) => {\n    if (!responsive || !originalSrc) return null;\n    \n    // Solo para imágenes locales\n    if (!originalSrc.startsWith('/assets/')) return null;\n    \n    const baseName = originalSrc.replace(/\\.(png|jpg|jpeg|webp)$/i, '');\n    const extension = originalSrc.split('.').pop();\n    \n    return [\n      `${baseName}-300.${extension} 300w`,\n      `${baseName}-600.${extension} 600w`,\n      `${baseName}-900.${extension} 900w`\n    ].join(', ');\n  };\n\n  // Intersection Observer para lazy loading\n  useEffect(() => {\n    if (!lazy || !imgRef.current) return;\n\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          if (entry.isIntersecting) {\n            setIsInView(true);\n            observer.unobserve(entry.target);\n          }\n        });\n      },\n      {\n        rootMargin: '50px', // Cargar 50px antes de que sea visible\n        threshold: 0.1\n      }\n    );\n\n    observer.observe(imgRef.current);\n\n    return () => {\n      if (imgRef.current) {\n        observer.unobserve(imgRef.current);\n      }\n    };\n  }, [lazy]);\n\n  // Cargar imagen cuando esté en vista\n  useEffect(() => {\n    if (!isInView || !src) return;\n\n    const img = new Image();\n    \n    img.onload = () => {\n      setImageSrc(src);\n      setIsLoaded(true);\n    };\n\n    img.onerror = () => {\n      // Fallback a imagen original si WebP falla\n      if (webp && src.includes('.webp')) {\n        const fallbackSrc = src.replace('.webp', '.png');\n        img.src = fallbackSrc;\n      } else {\n        setImageSrc(src);\n        setIsLoaded(true);\n      }\n    };\n\n    // Intentar WebP primero\n    const webpSrc = getWebPSrc(src);\n    img.src = webpSrc;\n\n  }, [isInView, src, webp]);\n\n  // Generar atributos de la imagen\n  const imageProps = {\n    ref: imgRef,\n    src: isLoaded ? imageSrc : placeholder,\n    loading: lazy ? 'lazy' : 'eager',\n    decoding: 'async',\n    ...(getResponsiveSrcSet(src) && {\n      srcSet: getResponsiveSrcSet(src),\n      sizes: '(max-width: 768px) 300px, (max-width: 1024px) 600px, 900px'\n    })\n  };\n\n  return {\n    imageProps,\n    isLoaded,\n    isInView,\n    placeholder\n  };\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}